services:
    airflow-webserver:
        image: apache/airflow:1.10.15
        environment:
            - AIRFLOW__CORE__EXECUTOR=SequentialExecutor
            - AIRFLOW__CORE__SQL_ALCHEMY_CONN=sqlite:////root/airflow/airflow.db
        ports:
            - "8080:8080"
        volumes:
            - ./dags:/opt/airflow/dags
        networks:
            - airflow-network

    airflow-scheduler:
        image: apache/airflow:1.10.15
        environment:
            - AIRFLOW__CORE__EXECUTOR=SequentialExecutor
            - AIRFLOW__CORE__SQL_ALCHEMY_CONN=sqlite:////root/airflow/airflow.db
        volumes:
            - ./dags:/opt/airflow/dags
        networks:
            - airflow-network

    airflow-worker:
        image: apache/airflow:1.10.15
        environment:
            - AIRFLOW__CORE__EXECUTOR=SequentialExecutor
        volumes:
            - ./dags:/opt/airflow/dags
        networks:
            - airflow-network

    mysql:
        image: mysql:latest
        environment:
            - MYSQL_ROOT_PASSWORD=root_password
        ports:
            - "3306:3306"
        networks:
            - airflow-network

networks:
    airflow-network:
        driver: bridge
